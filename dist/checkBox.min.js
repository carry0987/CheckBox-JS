!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CheckBox=t()}(this,(function(){"use strict";function e(e){throw new Error(e)}var t=Object.freeze({__proto__:null,reportError:function(...e){console.error(...e)},throwError:e});function n(e,t,n){if("string"!=typeof e)return e;let i=document;return null===t&&n?i=n:t&&t instanceof Node&&"querySelector"in t?i=t:n&&n instanceof Node&&"querySelector"in n&&(i=n),"all"===t?i.querySelectorAll(e):i.querySelector(e)}function i(e,t={},n=""){let i=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("textContent"===e||"innerText"===e?i.textContent=t[e]:i.setAttribute(e,t[e]));return n&&(i.textContent=n),i}var o=Object.freeze({__proto__:null,addClass:function(e,t){return e.classList.add(t),e},createElem:i,getElem:n,hasClass:function(e,t){return e.classList.contains(t)},insertAfter:function(t,n){if("string"==typeof n){let t=i("div");t.innerHTML=n,(n=t.firstChild)||e("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(n,t.nextSibling)},insertBefore:function(t,n){if("string"==typeof n){let t=i("div");t.innerHTML=n,(n=t.firstChild)||e("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(n,t)},removeClass:function(e,t){return e.classList.remove(t),e},toggleClass:function(e,t){return e.classList.toggle(t),e}});let c="utils-style";const l={from:".utils",to:".utils-"};function s(e,...t){if(!t.length)return e;const n=t.shift();if(n)for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t],c=t;"object"!=typeof(i=o)||null===i||Array.isArray(i)?e[c]=o:(e[c]&&"object"==typeof e[c]||(e[c]={}),s(e[c],o))}var i;return s(e,...t)}function r(e){c=e}function h(e,t){l.from=e,l.to=t}function a(e,t=null){t=p(t)?"":t;let n=i("style");n.id=c+t,n.textContent="",document.head.append(n);let o=n.sheet;for(let n in e)e.hasOwnProperty(n)&&u(o,n,d(e[n]),t)}function d(e){let t="";for(let[n,i]of Object.entries(e))n=n.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${n}:${i};`;return t}function u(e,t,n,i=null){i=p(i)?"":i;let o=t.replace(l.from,l.to+i);e.insertRule(o+"{"+n+"}",0)}function k(e=null){e=p(e)?"":e;let t=n("#"+c+e);t&&t.parentNode.removeChild(t)}function p(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}class f{static throwError=t.throwError;static getElem=o.getElem;static deepMerge=s;static injectStylesheet=a;static removeStylesheet=k;static setStylesheetId=r;static setReplaceRule=h;static getTemplate=function(e){return`\n        <div class="checkbox check-box-${e}">\n            <span class="checkmark"></span>\n            <label class="checkbox-label"></label>\n        </div>\n        `};static handleCheckboxTitle=function(e,t){let n=!1,i=null,o=!1,c=e?.title||e?.dataset?.checkboxTitle;return t&&"LABEL"===t.tagName&&(o=t.cloneNode(!0),c=(()=>{if(!p(e.id)){if(t?.htmlFor===e.id)return n=!0,!0;if(t?.dataset?.checkboxFor===e.id)return!0}return e?.dataset?.checkboxId&&t?.dataset?.checkboxFor===e?.dataset?.checkboxId?(i=p(e.id)&&p(t.htmlFor)?"check-"+function(e=8){return Math.random().toString(36).substring(2,2+e)}(6):null,!0):null})()),[c,n,i,o]};static insertCheckbox=function(e,t,n,i){let c=f.getTemplate(e),l=o.createElem("div");l.innerHTML=c.trim();let s=o.getElem(".checkmark",l),r=o.getElem("label",l),h=t.cloneNode(!0);return n&&(h.id=n),!0===i&&(r.htmlFor=h.id),s.addEventListener("click",(e=>{e.preventDefault(),h.click()})),s.parentNode.insertBefore(h,s),[h,l,r]};static insertCheckboxTitle=function(e,t,n,i){e?(n.textContent=e,!0===t&&(n.classList.add("checkbox-labeled"),n.addEventListener("click",(e=>{e.preventDefault(),i.click()})))):n.parentNode.removeChild(n)};static toggleCheckStatus=function(e,t){t?(e.checked=!0,e.setAttribute("checked","checked")):(e.checked=!1,e.removeAttribute("checked"))};static toggleCheckAll=function(e,t){let n=o.getElem(e);n&&(t&&t.checked&&t.input?f.toggleCheckStatus(n,!1==(t.checked.length!==t.input.length||0===t.checked.length)):f.toggleCheckStatus(n,!1))};static restoreElement=function(e){e.removeEventListener("change",e.checkBoxChange),e.checkBoxChange=null,e.removeAttribute("data-checkbox"),e.parentNode.replaceWith(e);let t=e.isValidLabel;t&&t.nodeType===Node.ELEMENT_NODE&&e.parentNode.insertBefore(t,e.nextSibling)}}f.setStylesheetId("checkbox-style"),f.setReplaceRule(".check-box",".check-box-");class g{constructor(e,t={}){void 0===g.firstLoad&&(g.firstLoad=!0),this.init(e,t,g.instance.length),g.instance.push(this),1===g.instance.length&&!0===g.firstLoad&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("CheckBox is loaded, version:"+g.version)}static destroyAll(){g.instance.forEach((e=>{e.destroy()})),g.instance=[]}init(e,t,n){let i=f.getElem(e,"all");(!i||i.length<1)&&f.throwError("Cannot find elements : "+e),this.id=n,this.element=e,this.allElement=[],this.option=f.deepMerge({},g.defaultOption,t),this.total={checked:[],list:[],input:[]};let o={};if(this.option?.checkMark&&(o={".check-box input[type=checkbox] + .checkmark:after":{"background-image":"url("+this.option.checkMark+")"}}),this.option?.styles&&Object.keys(this.option.styles).length>0&&(o=f.deepMerge({},this.option.styles,o)),o&&f.injectStylesheet(o,this.id),this.onChange=(e,t)=>{this.option?.onChange&&this.option.onChange(e,t)},this.onCheckAll=e=>{this.option?.onCheckAll&&this.option.onCheckAll(e)},i.forEach(((e,t)=>{if("checkbox"!==e.type)return;if(e.hasAttribute("data-checkbox"))return;e.setAttribute("data-checkbox","true");let n=e.nextElementSibling,o=this.option.bindLabel,[c,l,s,r]=f.handleCheckboxTitle(e,n);o=!0===l||o,!0===c&&(c=n.textContent,n.parentNode.removeChild(n)),e.checked?f.toggleCheckStatus(e,!0):this.option?.checked&&("boolean"==typeof this.option.checked&&1===i.length&&f.toggleCheckStatus(e,!0),e?.value!==this.option.checked&&t!==this.option.checked||f.toggleCheckStatus(e,!0),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(e.name)||this.option.checked.includes(e.id))&&f.toggleCheckStatus(e,!0));let[h,a,d]=f.insertCheckbox(this.id,e,s,l);e.parentNode.replaceChild(a.firstElementChild,e),f.insertCheckboxTitle(c,o,d,h);let u=this.checkBoxChange.bind(this,!0,h);h.addEventListener("change",u),h.checkBoxChange=u,h.isValidLabel=r,this.allElement.push(h)})),this.option?.checkAll){const e=f.getElem(this.option.checkAll);if(e&&"checkbox"===e?.type){if(e.hasAttribute("data-checkbox"))return;e.setAttribute("data-checkbox","true");let t=e.nextElementSibling,n=this.option?.bindLabel,[i,o,c,l]=f.handleCheckboxTitle(e,t);n=!0===o||n,!0===i&&(i=t.textContent,t.parentNode.removeChild(t));let[s,r,h]=f.insertCheckbox(this.id,e,c,o);e.parentNode.replaceChild(r.firstElementChild,e),f.insertCheckboxTitle(i,n,h,s);let a=(e=>{const t=e.target.checked;this.allElement.forEach((e=>{f.toggleCheckStatus(e,t)})),this.checkBoxChange(!1),this.onCheckAll(t)}).bind(this);s.addEventListener("change",a),s.checkAllChange=a,s.isValidLabel=l,this.checkAll=s}}return this}checkBoxChange(e,t=null){const n=this.total;n.list=[],n.input=[],n.checked=[],this.allElement.forEach((e=>{n.input.push(e),e.checked&&(n.list.push(e.value),n.checked.push(e))})),e&&f.toggleCheckAll(this.option.checkAll,n),this.onChange(n,t),t&&f.toggleCheckStatus(t,t.checked);const i=f.createEvent("checkbox-change");i.total=n,document.dispatchEvent(i)}getCheckBox(){return this.total}refresh(){this.init(this.element,this.option)}destroy(){return g.firstLoad=!1,this.allElement.forEach((e=>{f.restoreElement(e)})),this.checkAll&&(f.toggleCheckAll(this.checkAll,!1),f.restoreElement(this.checkAll)),this.allElement=[],this.total={},f.removeStylesheet(this.id),g.instance.splice(this.id,1),this}}return g.version="1.2.3",g.instance=[],g.defaultOption={checked:null,checkMark:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiI+PC9wb2x5bGluZT48L3N2Zz4=",checkAll:null,onChange:null,onCheckAll:null,bindLabel:!0,styles:{}},g}));

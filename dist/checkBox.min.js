!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CheckBox=t()}(this,(function(){"use strict";function e(...e){console.error(...e)}function t(e){throw new Error(e)}var n=Object.freeze({__proto__:null,reportError:e,throwError:t});function c(e,t,n){if("string"!=typeof e)return e;let c=document;return null===t&&n?c=n:t&&t instanceof Node&&"querySelector"in t?c=t:n&&n instanceof Node&&"querySelector"in n&&(c=n),"all"===t?c.querySelectorAll(e):c.querySelector(e)}function i(e,t={},n=""){let c=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("textContent"===e||"innerText"===e?c.textContent=t[e]:c.setAttribute(e,t[e]));return n&&(c.textContent=n),c}let o="utils-style";const l={from:".utils",to:".utils-"};function s(e,...t){if(!t.length)return e;const n=t.shift();if(n)for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t],o=t;"object"!=typeof(c=i)||null===c||Array.isArray(c)?e[o]=i:(e[o]&&"object"==typeof e[o]||(e[o]={}),s(e[o],i))}var c;return s(e,...t)}function h(e){o=e}function r(e,t){l.from=e,l.to=t}function a(e,t=null){t=p(t)?"":t;let n=i("style");n.id=o+t,n.textContent="",document.head.append(n);let c=n.sheet;for(let n in e)e.hasOwnProperty(n)&&u(c,n,d(e[n]),t)}function d(e){let t="";for(let[n,c]of Object.entries(e))n=n.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${n}:${c};`;return t}function u(e,t,n,c=null){c=p(c)?"":c;let i=t.replace(l.from,l.to+c);e.insertRule(i+"{"+n+"}",0)}function k(e=null){e=p(e)?"":e;let t=c("#"+o+e);t&&t.parentNode.removeChild(t)}function p(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}function f(e,t,n){return new CustomEvent(e,{detail:t,...n})}var g=Object.freeze({__proto__:null,addEventListener:function(...e){const[t,n,c,i]=e;t.addEventListener(n,c,i)},createEvent:f,dispatchEvent:function(n,c=document,i,o){try{if("string"==typeof n){let e=f(n,i,o);return c.dispatchEvent(e)}if(n instanceof Event)return c.dispatchEvent(n);t("Invalid event type")}catch(t){return e("Dispatch Event Error:",t),!1}},removeEventListener:function(...e){const[t,n,c,i]=e;t.removeEventListener(n,c,i)}});class b{static throwError=n.throwError;static getElem=c;static deepMerge=s;static injectStylesheet=a;static removeStylesheet=k;static setStylesheetId=h;static setReplaceRule=r;static createEvent=g.createEvent;static dispatchEvent=g.dispatchEvent;static getTemplate=function(e){return`\n        <div class="checkbox check-box-${e}">\n            <span class="checkmark"></span>\n            <label class="checkbox-label"></label>\n        </div>\n        `};static handleCheckboxTitle=function(e,t){let n=!1,c=null,i=!1,o=e?.title||e?.dataset?.checkboxTitle;return t&&"LABEL"===t.tagName&&(i=t.cloneNode(!0),o=(()=>{if(!p(e.id)){if(t?.htmlFor===e.id)return n=!0,!0;if(t?.dataset?.checkboxFor===e.id)return!0}return e?.dataset?.checkboxId&&t?.dataset?.checkboxFor===e?.dataset?.checkboxId?(c=p(e.id)&&p(t.htmlFor)?"check-"+function(e=8){return Math.random().toString(36).substring(2,2+e)}(6):null,!0):null})()),[o,n,c,i]};static insertCheckbox=function(e,t,n,o){let l=b.getTemplate(e),s=i("div");s.innerHTML=l.trim();let h=c(".checkmark",s),r=c("label",s),a=t.cloneNode(!0);return n&&(a.id=n),!0===o&&(r.htmlFor=a.id),h.addEventListener("click",(e=>{e.preventDefault(),a.click()})),h.parentNode.insertBefore(a,h),[a,s,r]};static insertCheckboxTitle=function(e,t,n,c){e?(n.textContent=e,!0===t&&(n.classList.add("checkbox-labeled"),n.addEventListener("click",(e=>{e.preventDefault(),c.click()})))):n.parentNode.removeChild(n)};static toggleCheckStatus=function(e,t){t?(e.checked=!0,e.setAttribute("checked","checked")):(e.checked=!1,e.removeAttribute("checked"))};static toggleCheckAll=function(e,t){let n=c(e);n&&(t&&t.checked&&t.input?b.toggleCheckStatus(n,!1==(t.checked.length!==t.input.length||0===t.checked.length)):b.toggleCheckStatus(n,!1))};static restoreElement=function(e){e.removeEventListener("change",e.checkBoxChange),e.checkBoxChange=null,e.removeAttribute("data-checkbox"),e.parentNode.replaceWith(e);let t=e.isValidLabel;t&&t.nodeType===Node.ELEMENT_NODE&&e.parentNode.insertBefore(t,e.nextSibling)}}b.setStylesheetId("checkbox-style"),b.setReplaceRule(".check-box",".check-box-");class m{constructor(e,t={}){void 0===m.firstLoad&&(m.firstLoad=!0),this.init(e,t,m.instance.length),m.instance.push(this),1===m.instance.length&&!0===m.firstLoad&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("CheckBox is loaded, version:"+m.version)}static destroyAll(){m.instance.forEach((e=>{e.destroy()})),m.instance=[]}init(e,t,n){let c=b.getElem(e,"all");(!c||c.length<1)&&b.throwError("Cannot find elements : "+e),this.id=n,this.element=e,this.allElement=[],this.option=b.deepMerge({},m.defaultOption,t),this.total={checked:[],list:[],input:[]};let i={};if(this.option?.checkMark&&(i={".check-box input[type=checkbox] + .checkmark:after":{"background-image":"url("+this.option.checkMark+")"}}),this.option?.styles&&Object.keys(this.option.styles).length>0&&(i=b.deepMerge({},this.option.styles,i)),i&&b.injectStylesheet(i,this.id),this.onChange=(e,t)=>{this.option?.onChange&&this.option.onChange(e,t)},this.onCheckAll=e=>{this.option?.onCheckAll&&this.option.onCheckAll(e)},c.forEach(((e,t)=>{if("checkbox"!==e.type)return;if(e.hasAttribute("data-checkbox"))return;e.setAttribute("data-checkbox","true");let n=e.nextElementSibling,i=this.option.bindLabel,[o,l,s,h]=b.handleCheckboxTitle(e,n);i=!0===l||i,!0===o&&(o=n.textContent,n.parentNode.removeChild(n)),e.checked?b.toggleCheckStatus(e,!0):this.option?.checked&&("boolean"==typeof this.option.checked&&1===c.length&&b.toggleCheckStatus(e,!0),e?.value!==this.option.checked&&t!==this.option.checked||b.toggleCheckStatus(e,!0),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(e.name)||this.option.checked.includes(e.id))&&b.toggleCheckStatus(e,!0));let[r,a,d]=b.insertCheckbox(this.id,e,s,l);e.parentNode.replaceChild(a.firstElementChild,e),b.insertCheckboxTitle(o,i,d,r);let u=this.checkBoxChange.bind(this,!0,r);r.addEventListener("change",u),r.checkBoxChange=u,r.isValidLabel=h,this.allElement.push(r)})),this.option?.checkAll){const e=b.getElem(this.option.checkAll);if(e&&"checkbox"===e?.type){if(e.hasAttribute("data-checkbox"))return;e.setAttribute("data-checkbox","true");let t=e.nextElementSibling,n=this.option?.bindLabel,[c,i,o,l]=b.handleCheckboxTitle(e,t);n=!0===i||n,!0===c&&(c=t.textContent,t.parentNode.removeChild(t));let[s,h,r]=b.insertCheckbox(this.id,e,o,i);e.parentNode.replaceChild(h.firstElementChild,e),b.insertCheckboxTitle(c,n,r,s);let a=(e=>{const t=e.target.checked;this.allElement.forEach((e=>{b.toggleCheckStatus(e,t)})),this.checkBoxChange(!1),this.onCheckAll(t)}).bind(this);s.addEventListener("change",a),s.checkAllChange=a,s.isValidLabel=l,this.checkAll=s,!0!==this.option.checked&&!0!==e.checked||(b.toggleCheckStatus(s,!0),s.dispatchEvent(new Event("change")))}}return this}checkBoxChange(e,t=null){const n=this.total;n.list=[],n.input=[],n.checked=[],this.allElement.forEach((e=>{n.input.push(e),e.checked&&(n.list.push(e.value),n.checked.push(e))})),e&&b.toggleCheckAll(this.option.checkAll,n),this.onChange(n,t),t&&b.toggleCheckStatus(t,t.checked);const c=b.createEvent("checkbox-change",{detail:n});b.dispatchEvent(c)}getCheckBox(){return this.total}refresh(){this.init(this.element,this.option)}destroy(){return m.firstLoad=!1,this.allElement.forEach((e=>{b.restoreElement(e)})),this.checkAll&&(b.toggleCheckAll(this.checkAll,!1),b.restoreElement(this.checkAll)),this.allElement=[],this.total={},b.removeStylesheet(this.id),m.instance.splice(this.id,1),this}}return m.version="1.2.5",m.instance=[],m.defaultOption={checked:null,checkMark:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiI+PC9wb2x5bGluZT48L3N2Zz4=",checkAll:null,onChange:null,onCheckAll:null,bindLabel:!0,styles:{}},m}));

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CheckBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,c)=>"object"==typeof e?e:void 0===t&&void 0===c?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===c?document.querySelectorAll(e):c.querySelectorAll(e):"object"==typeof t&&void 0===c?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...c){const n=c.shift();if(!n)return t;if(e.isObject(t)&&e.isObject(n))for(const c in n)e.isObject(n[c])?(t[c]||Object.assign(t,{[c]:{}}),e.deepMerge(t[c],n[c])):Object.assign(t,{[c]:n[c]});return e.deepMerge(t,...c)},createEvent(e){let t;return window.CustomEvent&&"function"==typeof window.CustomEvent?t=new CustomEvent(e):(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!1,!1,void 0)),t},injectStylesheet(t,c){let n=document.createElement("style");n.id="checkbox-style"+c,n.appendChild(document.createTextNode("")),document.head.appendChild(n);let i=document.styleSheets[document.styleSheets.length-1];for(let n in t)t.hasOwnProperty(n)&&e.compatInsertRule(i,n,e.buildRules(t[n]),c)},buildRules(e){let t="";for(let[c,n]of Object.entries(e))c=c.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${c}:${n};`;return t},compatInsertRule(e,t,c,n){let i=t.replace(".check-box",".check-box-"+n);e.insertRule(i+"{"+c+"}",0)},removeStylesheet(t){let c=e.getElem("#checkbox-style"+t);c&&c.parentNode.removeChild(c)},createUniqueID:(e=8)=>Math.random().toString(36).substring(2,2+e),getTemplate:e=>`\n        <div class="checkbox check-box-${e}">\n            <span class="checkmark"></span>\n            <label class="checkbox-label"></label>\n        </div>\n        `,isEmpty:e=>!e?.length,handleCheckboxTitle(t,c){let n=!1,i=null,l=!1,o=t?.title||t?.dataset?.checkboxTitle;return c&&"LABEL"===c.tagName&&(l=c.cloneNode(!0),o=(()=>{if(!e.isEmpty(t.id)){if(c?.htmlFor===t.id)return n=!0,!0;if(c?.dataset?.checkboxFor===t.id)return!0}return t?.dataset?.checkboxId&&c?.dataset?.checkboxFor===t?.dataset?.checkboxId?(i=e.isEmpty(t.id)&&e.isEmpty(c.htmlFor)?"check-"+e.createUniqueID(6):null,!0):null})()),[o,n,i,l]},insertCheckbox(t,c,n,i){let l=e.getTemplate(t),o=document.createElement("div");o.innerHTML=l.trim();let h=e.getElem(".checkmark",o),s=e.getElem("label",o),a=c.cloneNode(!0);return n&&(a.id=n),!0===i&&(s.htmlFor=a.id),h.addEventListener("click",(e=>{e.preventDefault(),a.click()})),h.parentNode.insertBefore(a,h),[a,o,s]},insertCheckboxTitle(e,t,c,n){e?(c.textContent=e,!0===t&&(c.classList.add("checkbox-labeled"),c.addEventListener("click",(e=>{e.preventDefault(),n.click()})))):c.parentNode.removeChild(c)},toggleCheckStatus(e,t){t?(e.checked=!0,e.setAttribute("checked","checked")):(e.checked=!1,e.removeAttribute("checked"))},toggleCheckAll(t,c){let n=e.getElem(t);n&&(c&&c.checked&&c.input?e.toggleCheckStatus(n,!1==(c.checked.length!==c.input.length||0===c.checked.length)):e.toggleCheckStatus(n,!1))}};class t{constructor(e,c={}){void 0===t.firstLoad&&(t.firstLoad=!0),this.init(e,c,t.instance.length),t.instance.push(this),1===t.instance.length&&!0===t.firstLoad&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("CheckBox is loaded, version:"+t.version)}static destroyAll(){t.instance.forEach((e=>{e.destroy()})),t.instance=[]}init(c,n,i){let l=e.getElem(c,"all");(!l||l.length<1)&&function(e){throw new Error(e)}("Cannot find elements : "+c),this.id=i,this.element=c,this.allElement=[],this.option=e.deepMerge({},t.defaultOption,n),this.total={checked:[],list:[],input:[]};let o={};if(this.option?.checkMark&&(o={".check-box input[type=checkbox] + .checkmark:after":{"background-image":"url("+this.option.checkMark+")"}}),this.option?.styles&&Object.keys(this.option.styles).length>0&&(o=e.deepMerge({},this.option.styles,o)),o&&e.injectStylesheet(o,this.id),this.onChange=(e,t)=>{this.option?.onChange&&this.option.onChange(e,t)},this.onCheckAll=e=>{this.option?.onCheckAll&&this.option.onCheckAll(e)},l.forEach(((t,c)=>{if("checkbox"!==t.type)return;if(t.hasAttribute("data-checkbox"))return;t.setAttribute("data-checkbox","true");let n=t.nextElementSibling,i=this.option.bindLabel,[o,h,s,a]=e.handleCheckboxTitle(t,n);i=!0===h||i,!0===o&&(o=n.textContent,n.parentNode.removeChild(n)),t.checked?e.toggleCheckStatus(t,!0):this.option?.checked&&("boolean"==typeof this.option.checked&&1===l.length&&e.toggleCheckStatus(t,!0),t?.value!==this.option.checked&&c!==this.option.checked||e.toggleCheckStatus(t,!0),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(t.name)||this.option.checked.includes(t.id))&&e.toggleCheckStatus(t,!0));let[r,d,k]=e.insertCheckbox(this.id,t,s,h);t.parentNode.replaceChild(d.firstElementChild,t),e.insertCheckboxTitle(o,i,k,r);let u=this.checkBoxChange.bind(this,!0,r);r.addEventListener("change",u),r.checkBoxChange=u,r.isValidLabel=a,this.allElement.push(r)})),this.option?.checkAll){const t=e.getElem(this.option.checkAll);if(t&&"checkbox"===t?.type){if(t.hasAttribute("data-checkbox"))return;t.setAttribute("data-checkbox","true");let c=t.nextElementSibling,n=this.option?.bindLabel,[i,l,o,h]=e.handleCheckboxTitle(t,c);n=!0===l||n,!0===i&&(i=c.textContent,c.parentNode.removeChild(c));let[s,a,r]=e.insertCheckbox(this.id,t,o,l);t.parentNode.replaceChild(a.firstElementChild,t),e.insertCheckboxTitle(i,n,r,s);let d=(t=>{const c=t.target.checked;this.allElement.forEach((t=>{e.toggleCheckStatus(t,c)})),this.checkBoxChange(!1),this.onCheckAll(c)}).bind(this);s.addEventListener("change",d),s.checkAllChange=d,s.isValidLabel=h,this.checkAll=s}}return this}checkBoxChange(t,c=null){const n=this.total;n.list=[],n.input=[],n.checked=[],this.allElement.forEach((e=>{n.input.push(e),e.checked&&(n.list.push(e.value),n.checked.push(e))})),t&&e.toggleCheckAll(this.option.checkAll,n),this.onChange(n,c),c&&e.toggleCheckStatus(c,c.checked);const i=e.createEvent("checkbox-change");i.total=n,document.dispatchEvent(i)}getCheckBox(){return this.total}refresh(){this.init(this.element,this.option)}destroy(){if(t.firstLoad=!1,this.allElement.forEach((e=>{e.removeEventListener("change",e.checkBoxChange),e.checkBoxChange=null,e.removeAttribute("data-checkbox"),e.parentNode.replaceWith(e);let t=e.isValidLabel;t&&t.nodeType===Node.ELEMENT_NODE&&e.parentNode.insertBefore(t,e.nextSibling)})),this.checkAll){this.checkAll.removeEventListener("change",this.checkAll.checkAllChange),this.checkAll.checkAllChange=null,this.checkAll.removeAttribute("data-checkbox"),this.checkAll.parentNode.replaceWith(this.checkAll);let e=this.checkAll.isValidLabel;e&&e.nodeType===Node.ELEMENT_NODE&&this.checkAll.parentNode.insertBefore(e,this.checkAll.nextSibling)}return this.allElement=[],this.total={},e.removeStylesheet(this.id),t.instance.splice(this.id,1),this}}return t.version="1.1.5",t.instance=[],t.defaultOption={checkMark:null,checkAll:null,onChange:null,onCheckAll:null,bindLabel:!0,styles:{}},t}));

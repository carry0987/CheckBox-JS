!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CheckBox=t()}(this,(function(){"use strict";function e(...e){console.error(...e)}function t(e){throw new Error(e)}var n=Object.freeze({__proto__:null,reportError:e,throwError:t});function i(e,t,n){if("string"!=typeof e)return e;let i=document;return null===t&&n?i=n:t&&t instanceof Node&&"querySelector"in t?i=t:n&&n instanceof Node&&"querySelector"in n&&(i=n),"all"===t?i.querySelectorAll(e):i.querySelector(e)}function o(e,t={},n=""){let i=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("textContent"===e||"innerText"===e?i.textContent=t[e]:i.setAttribute(e,t[e]));return n&&(i.textContent=n),i}var c=Object.freeze({__proto__:null,addClass:function(e,t){return e.classList.add(t),e},createElem:o,getElem:i,hasClass:function(e,t){return e.classList.contains(t)},insertAfter:function(e,n){if("string"==typeof n){let e=o("div");e.innerHTML=n,(n=e.firstChild)||t("The new node (string) provided did not produce a valid DOM element.")}e.parentNode.insertBefore(n,e.nextSibling)},insertBefore:function(e,n){if("string"==typeof n){let e=o("div");e.innerHTML=n,(n=e.firstChild)||t("The new node (string) provided did not produce a valid DOM element.")}e.parentNode.insertBefore(n,e)},removeClass:function(e,t){return e.classList.remove(t),e},toggleClass:function(e,t){return e.classList.toggle(t),e}});let l="utils-style";const r={from:".utils",to:".utils-"};function s(e,...t){if(!t.length)return e;const n=t.shift();if(n)for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t],c=t;"object"!=typeof(i=o)||null===i||Array.isArray(i)?e[c]=o:(e[c]&&"object"==typeof e[c]||(e[c]={}),s(e[c],o))}var i;return s(e,...t)}function h(e){l=e}function a(e,t){r.from=e,r.to=t}function d(e,t=null){t=f(t)?"":t;let n=o("style");n.id=l+t,n.textContent="",document.head.append(n);let i=n.sheet;for(let n in e)e.hasOwnProperty(n)&&p(i,n,u(e[n]),t)}function u(e){let t="";for(let[n,i]of Object.entries(e))n=n.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${n}:${i};`;return t}function p(e,t,n,i=null){i=f(i)?"":i;let o=t.replace(r.from,r.to+i);e.insertRule(o+"{"+n+"}",0)}function k(e=null){e=f(e)?"":e;let t=i("#"+l+e);t&&t.parentNode.removeChild(t)}function f(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}function g(e,t,n){return new CustomEvent(e,{detail:t,...n})}var b=Object.freeze({__proto__:null,addEventListener:function(...e){const[t,n,i,o]=e;t.addEventListener(n,i,o)},createEvent:g,dispatchEvent:function(n,i=document,o,c){try{if("string"==typeof n){let e=g(n,o,c);return i.dispatchEvent(e)}if(n instanceof Event)return i.dispatchEvent(n);t("Invalid event type")}catch(t){return e("Dispatch Event Error:",t),!1}},removeEventListener:function(...e){const[t,n,i,o]=e;t.removeEventListener(n,i,o)}});class m{static throwError=n.throwError;static getElem=c.getElem;static deepMerge=s;static injectStylesheet=d;static removeStylesheet=k;static setStylesheetId=h;static setReplaceRule=a;static createEvent=b.createEvent;static dispatchEvent=b.dispatchEvent;static getTemplate=function(e){return`\n        <div class="checkbox check-box-${e}">\n            <span class="checkmark"></span>\n            <label class="checkbox-label"></label>\n        </div>\n        `};static handleCheckboxTitle=function(e,t){let n=!1,i=null,o=!1,c=e?.title||e?.dataset?.checkboxTitle;return t&&"LABEL"===t.tagName&&(o=t.cloneNode(!0),c=(()=>{if(!f(e.id)){if(t?.htmlFor===e.id)return n=!0,!0;if(t?.dataset?.checkboxFor===e.id)return!0}return e?.dataset?.checkboxId&&t?.dataset?.checkboxFor===e?.dataset?.checkboxId?(i=f(e.id)&&f(t.htmlFor)?"check-"+function(e=8){return Math.random().toString(36).substring(2,2+e)}(6):null,!0):null})()),[c,n,i,o]};static insertCheckbox=function(e,t,n,i){let o=m.getTemplate(e),l=c.createElem("div");l.innerHTML=o.trim();let r=c.getElem(".checkmark",l),s=c.getElem("label",l),h=t.cloneNode(!0);return n&&(h.id=n),!0===i&&(s.htmlFor=h.id),r.addEventListener("click",(e=>{e.preventDefault(),h.click()})),r.parentNode.insertBefore(h,r),[h,l,s]};static insertCheckboxTitle=function(e,t,n,i){e?(n.textContent=e,!0===t&&(n.classList.add("checkbox-labeled"),n.addEventListener("click",(e=>{e.preventDefault(),i.click()})))):n.parentNode.removeChild(n)};static toggleCheckStatus=function(e,t){t?(e.checked=!0,e.setAttribute("checked","checked")):(e.checked=!1,e.removeAttribute("checked"))};static toggleCheckAll=function(e,t){let n=c.getElem(e);n&&(t&&t.checked&&t.input?m.toggleCheckStatus(n,!1==(t.checked.length!==t.input.length||0===t.checked.length)):m.toggleCheckStatus(n,!1))};static restoreElement=function(e){e.removeEventListener("change",e.checkBoxChange),e.checkBoxChange=null,e.removeAttribute("data-checkbox"),e.parentNode.replaceWith(e);let t=e.isValidLabel;t&&t.nodeType===Node.ELEMENT_NODE&&e.parentNode.insertBefore(t,e.nextSibling)}}m.setStylesheetId("checkbox-style"),m.setReplaceRule(".check-box",".check-box-");class C{constructor(e,t={}){void 0===C.firstLoad&&(C.firstLoad=!0),this.init(e,t,C.instance.length),C.instance.push(this),1===C.instance.length&&!0===C.firstLoad&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("CheckBox is loaded, version:"+C.version)}static destroyAll(){C.instance.forEach((e=>{e.destroy()})),C.instance=[]}init(e,t,n){let i=m.getElem(e,"all");(!i||i.length<1)&&m.throwError("Cannot find elements : "+e),this.id=n,this.element=e,this.allElement=[],this.option=m.deepMerge({},C.defaultOption,t),this.total={checked:[],list:[],input:[]};let o={};if(this.option?.checkMark&&(o={".check-box input[type=checkbox] + .checkmark:after":{"background-image":"url("+this.option.checkMark+")"}}),this.option?.styles&&Object.keys(this.option.styles).length>0&&(o=m.deepMerge({},this.option.styles,o)),o&&m.injectStylesheet(o,this.id),this.onChange=(e,t)=>{this.option?.onChange&&this.option.onChange(e,t)},this.onCheckAll=e=>{this.option?.onCheckAll&&this.option.onCheckAll(e)},i.forEach(((e,t)=>{if("checkbox"!==e.type)return;if(e.hasAttribute("data-checkbox"))return;e.setAttribute("data-checkbox","true");let n=e.nextElementSibling,o=this.option.bindLabel,[c,l,r,s]=m.handleCheckboxTitle(e,n);o=!0===l||o,!0===c&&(c=n.textContent,n.parentNode.removeChild(n)),e.checked?m.toggleCheckStatus(e,!0):this.option?.checked&&("boolean"==typeof this.option.checked&&1===i.length&&m.toggleCheckStatus(e,!0),e?.value!==this.option.checked&&t!==this.option.checked||m.toggleCheckStatus(e,!0),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(e.name)||this.option.checked.includes(e.id))&&m.toggleCheckStatus(e,!0));let[h,a,d]=m.insertCheckbox(this.id,e,r,l);e.parentNode.replaceChild(a.firstElementChild,e),m.insertCheckboxTitle(c,o,d,h);let u=this.checkBoxChange.bind(this,!0,h);h.addEventListener("change",u),h.checkBoxChange=u,h.isValidLabel=s,this.allElement.push(h)})),this.option?.checkAll){const e=m.getElem(this.option.checkAll);if(e&&"checkbox"===e?.type){if(e.hasAttribute("data-checkbox"))return;e.setAttribute("data-checkbox","true");let t=e.nextElementSibling,n=this.option?.bindLabel,[i,o,c,l]=m.handleCheckboxTitle(e,t);n=!0===o||n,!0===i&&(i=t.textContent,t.parentNode.removeChild(t));let[r,s,h]=m.insertCheckbox(this.id,e,c,o);e.parentNode.replaceChild(s.firstElementChild,e),m.insertCheckboxTitle(i,n,h,r);let a=(e=>{const t=e.target.checked;this.allElement.forEach((e=>{m.toggleCheckStatus(e,t)})),this.checkBoxChange(!1),this.onCheckAll(t)}).bind(this);r.addEventListener("change",a),r.checkAllChange=a,r.isValidLabel=l,this.checkAll=r}}return this}checkBoxChange(e,t=null){const n=this.total;n.list=[],n.input=[],n.checked=[],this.allElement.forEach((e=>{n.input.push(e),e.checked&&(n.list.push(e.value),n.checked.push(e))})),e&&m.toggleCheckAll(this.option.checkAll,n),this.onChange(n,t),t&&m.toggleCheckStatus(t,t.checked);const i=m.createEvent("checkbox-change",{detail:n});m.dispatchEvent(i)}getCheckBox(){return this.total}refresh(){this.init(this.element,this.option)}destroy(){return C.firstLoad=!1,this.allElement.forEach((e=>{m.restoreElement(e)})),this.checkAll&&(m.toggleCheckAll(this.checkAll,!1),m.restoreElement(this.checkAll)),this.allElement=[],this.total={},m.removeStylesheet(this.id),C.instance.splice(this.id,1),this}}return C.version="1.2.4",C.instance=[],C.defaultOption={checked:null,checkMark:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiI+PC9wb2x5bGluZT48L3N2Zz4=",checkAll:null,onChange:null,onCheckAll:null,bindLabel:!0,styles:{}},C}));
